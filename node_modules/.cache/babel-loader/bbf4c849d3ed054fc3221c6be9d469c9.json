{"ast":null,"code":"import _slicedToArray from\"/Users/andre/Repositories/fashion-tech-dictionary/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect,useState}from'react';import terms from'../inventory/terms.json';import img_search from\"../assets/search.svg\";import img_cross from\"../assets/x.svg\";import Fuse from'fuse.js';import{BrowserRouter as Router,Switch,useHistory,useRouteMatch,Route,Link,useParams}from\"react-router-dom\";var HeaderComponent=function HeaderComponent(props){// HOOKS\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),searchActive=_useState6[0],setSearchActive=_useState6[1];var history=useHistory();var searchInput=useRef(null);var termArr=terms.terms;var options={shouldSort:true,threshold:0.2,location:0,distance:100,minMatchCharLength:5,keys:['Term']};var fuse=new Fuse(termArr,options);//---------------------------------------------//\ndocument.addEventListener('keypress',function(e){if(searchQuery.length==0){searchInput.current.focus();}});var onSearchChange=function onSearchChange(e){console.log('searchChange',e.target.value);setSearchQuery(e.target.value);setSearchResults(fuse.search(e.target.value).filter(function(x){return x.item.Term!='';}));};var onSubmit=function onSubmit(e){e.preventDefault();if(searchResults.length>0){onSearchClick(searchResults[0].item);}else{setSearchQuery('');searchInput.current.blur();}};var onSearchClick=function onSearchClick(term){setSearchQuery('');setSearchResults([]);history.push('/term/'+term.url);searchInput.current.blur();};var setSearch=function setSearch(e,val){e.preventDefault();if(val){// useEffect(() => {\nsearchInput.current.focus();// }, []);\n}else{setSearchQuery('');setSearchResults([]);searchInput.current.blur();}};var onFocus=function onFocus(e){setSearchActive(true);};var onBlur=function onBlur(e){setSearchActive(false);if(searchResults.length==0){setSearchQuery('');}};return React.createElement(\"header\",null,React.createElement(\"div\",{className:\"wrapper\"},React.createElement(\"div\",{className:\"title\"},\"FASHIONTECH DICTIONARY\"),React.createElement(\"div\",{className:\"searchHolder\"},React.createElement(\"div\",{className:\"buttons\"},!(searchActive||searchQuery.length>0)&&React.createElement(\"a\",{href:\"\",className:\"btnSearch\",onClick:function onClick(e){return setSearch(e,true);}},React.createElement(\"img\",{src:img_search})),(searchActive||searchQuery.length>0)&&React.createElement(\"a\",{href:\"\",className:\"btnClose\",onClick:function onClick(e){return setSearch(e,false);}},React.createElement(\"img\",{src:img_cross}))),React.createElement(\"form\",{onSubmit:onSubmit},React.createElement(\"input\",{type:\"search\",value:searchQuery,onChange:onSearchChange,onFocus:onFocus,onBlur:onBlur,ref:searchInput,maxLength:\"40\"}))),searchResults&&searchResults.length>0&&React.createElement(\"div\",{className:\"searchResults\"},searchResults.map(function(result){return React.createElement(\"div\",{className:\"searchItem\",key:result.item.url},React.createElement(\"a\",{onClick:function onClick(){return onSearchClick(result.item);}},result.item.Term));}))));};export default HeaderComponent;","map":{"version":3,"sources":["/Users/andre/Repositories/fashion-tech-dictionary/src/components/headerComponent.js"],"names":["React","useRef","useEffect","useState","terms","Fuse","BrowserRouter","Router","Switch","useHistory","useRouteMatch","Route","Link","useParams","HeaderComponent","props","searchQuery","setSearchQuery","searchResults","setSearchResults","searchActive","setSearchActive","history","searchInput","termArr","options","shouldSort","threshold","location","distance","minMatchCharLength","keys","fuse","document","addEventListener","e","length","current","focus","onSearchChange","console","log","target","value","search","filter","x","item","Term","onSubmit","preventDefault","onSearchClick","blur","term","push","url","setSearch","val","onFocus","onBlur","img_search","img_cross","map","result"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport terms from '../inventory/terms.json';\nimport img_search from '../assets/search.svg'\nimport img_cross from '../assets/x.svg'\nimport Fuse from 'fuse.js';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  useHistory,\n  useRouteMatch,\n  Route,\n  Link,\n  useParams\n} from \"react-router-dom\";\n\n const HeaderComponent = (props) => {\n\n    // HOOKS\n    const [searchQuery, setSearchQuery] = useState('');\n    const [searchResults, setSearchResults ] = useState([]);\n    const [searchActive, setSearchActive ] = useState(false);\n\n    let history = useHistory();\n\n    const searchInput = useRef(null);\n\n    const termArr = terms.terms;\n\n    const options = {\n        shouldSort: true,\n        threshold: 0.2,\n        location: 0,\n        distance: 100,\n        minMatchCharLength: 5,\n        keys: ['Term']\n      };\n  \n    const fuse = new Fuse(termArr, options );\n\n    //---------------------------------------------//\n\n    document.addEventListener('keypress', (e) => {\n      if( searchQuery.length == 0 ){\n          searchInput.current.focus();\n      }\n\n    });\n\n    const onSearchChange = e => {\n        \n        console.log( 'searchChange', e.target.value );\n\n        setSearchQuery(e.target.value);\n        setSearchResults( fuse.search(e.target.value).filter( x=> x.item.Term != '') )\n    }\n\n    const onSubmit = e => {\n        e.preventDefault();\n        if( searchResults.length > 0 ){\n          onSearchClick( searchResults[0].item )\n        } else {\n          setSearchQuery('');\n        searchInput.current.blur();\n\n        }\n    }\n\n    const onSearchClick = term => {\n        setSearchQuery('');\n        setSearchResults([]);\n        history.push('/term/' + term.url );\n        searchInput.current.blur();\n    }\n\n    const setSearch = (e, val) => {\n      e.preventDefault();\n\n      if( val ){\n        // useEffect(() => {\n          searchInput.current.focus();\n        // }, []);\n      } else {\n        setSearchQuery('');\n        setSearchResults([]);\n        searchInput.current.blur();\n      }\n\n    }\n\n    const onFocus = e => {\n      setSearchActive(true)\n    }\n\n    const onBlur = e => {\n      setSearchActive(false);\n      if( searchResults.length == 0 ){\n        setSearchQuery('');\n      }\n    }\n\n    return (\n        <header>\n          <div className=\"wrapper\">\n            \n            <div className=\"title\">\n              FASHIONTECH DICTIONARY\n            </div>\n\n            <div className=\"searchHolder\">\n                \n                <div className=\"buttons\">\n                  { !(searchActive || searchQuery.length>0) && <a href=\"\" className=\"btnSearch\" onClick={ (e) => setSearch(e, true) }><img src={ img_search } /></a> }\n                  { (searchActive || searchQuery.length>0) && <a href=\"\" className=\"btnClose\" onClick={ (e) => setSearch(e, false) }><img src={ img_cross } /></a> }\n                </div>\n\n                <form onSubmit={ onSubmit }> \n                  \n                    <input type=\"search\" value={searchQuery} onChange={onSearchChange} onFocus={onFocus} onBlur={onBlur} ref={searchInput} maxLength=\"40\" />\n                </form>\n\n                \n\n            </div>\n\n            { searchResults && searchResults.length > 0 && \n                <div className=\"searchResults\">  \n                  { \n                    searchResults.map( result => {\n                      return(<div className=\"searchItem\" key={result.item.url}>\n                          <a onClick={ () => onSearchClick(result.item) }>{ result.item.Term }</a>\n                      </div>)\n                    })\n                  }\n                </div>\n              }\n\n          </div>\n        </header>\n\n    );\n}\n\nexport default HeaderComponent\n\n"]},"metadata":{},"sourceType":"module"}