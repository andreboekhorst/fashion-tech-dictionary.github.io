{"ast":null,"code":"var _jsxFileName = \"/Users/andre/Repositories/fashion-tech-dictionary/src/components/headerComponent.js\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport terms from '../inventory/terms.json';\nimport img_search from \"../assets/search.svg\";\nimport img_cross from \"../assets/x.svg\";\nimport Fuse from 'fuse.js';\nimport { BrowserRouter as Router, Switch, useHistory, useRouteMatch, Route, Link, useParams } from \"react-router-dom\";\n\nconst HeaderComponent = props => {\n  // HOOKS\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchActive, setSearchActive] = useState(false);\n  let history = useHistory();\n  const searchInput = useRef(null);\n  const termArr = terms.terms;\n  const options = {\n    shouldSort: true,\n    threshold: 0.2,\n    location: 0,\n    distance: 100,\n    minMatchCharLength: 5,\n    keys: ['Term']\n  };\n  const fuse = new Fuse(termArr, options); //---------------------------------------------//\n\n  document.addEventListener('keypress', e => {\n    if (searchQuery.length == 0) {\n      searchInput.current.focus();\n    }\n  });\n\n  const onSearchChange = e => {\n    console.log('searchChange', e.target.value);\n    setSearchQuery(e.target.value);\n    setSearchResults(fuse.search(e.target.value).filter(x => x.item.Term != ''));\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (searchResults.length > 0) {\n      onSearchClick(searchResults[0].item);\n    } else {\n      setSearchQuery('');\n      searchInput.current.blur();\n    }\n  };\n\n  const onSearchClick = term => {\n    setSearchQuery('');\n    setSearchResults([]);\n    history.push('/term/' + term.url);\n    searchInput.current.blur();\n  };\n\n  const setSearch = (e, val) => {\n    e.preventDefault();\n\n    if (val) {\n      // useEffect(() => {\n      searchInput.current.focus(); // }, []);\n    } else {\n      setSearchQuery('');\n      setSearchResults([]);\n      searchInput.current.blur();\n    }\n  };\n\n  const onFocus = e => {\n    setSearchActive(true);\n  };\n\n  const onBlur = e => {\n    setSearchActive(false);\n\n    if (searchResults.length == 0) {\n      setSearchQuery('');\n    }\n  };\n\n  return React.createElement(\"header\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"FASHIONTECH DICTIONARY\"), React.createElement(\"div\", {\n    className: \"searchHolder\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"buttons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, !(searchActive || searchQuery.length > 0) && React.createElement(\"a\", {\n    href: \"\",\n    className: \"btnSearch\",\n    onClick: e => setSearch(e, true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: img_search,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), (searchActive || searchQuery.length > 0) && React.createElement(\"a\", {\n    href: \"\",\n    className: \"btnClose\",\n    onClick: e => setSearch(e, false),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: img_cross,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }))), React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"search\",\n    value: searchQuery,\n    onChange: onSearchChange,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    ref: searchInput,\n    maxLength: \"40\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }))), searchResults && searchResults.length > 0 && React.createElement(\"div\", {\n    className: \"searchResults\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, searchResults.map(result => {\n    return React.createElement(\"div\", {\n      className: \"searchItem\",\n      key: result.item.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: () => onSearchClick(result.item),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, result.item.Term));\n  }))));\n};\n\nexport default HeaderComponent;","map":{"version":3,"sources":["/Users/andre/Repositories/fashion-tech-dictionary/src/components/headerComponent.js"],"names":["React","useRef","useEffect","useState","terms","Fuse","BrowserRouter","Router","Switch","useHistory","useRouteMatch","Route","Link","useParams","HeaderComponent","props","searchQuery","setSearchQuery","searchResults","setSearchResults","searchActive","setSearchActive","history","searchInput","termArr","options","shouldSort","threshold","location","distance","minMatchCharLength","keys","fuse","document","addEventListener","e","length","current","focus","onSearchChange","console","log","target","value","search","filter","x","item","Term","onSubmit","preventDefault","onSearchClick","blur","term","push","url","setSearch","val","onFocus","onBlur","img_search","img_cross","map","result"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport terms from '../inventory/terms.json';\nimport img_search from '../assets/search.svg'\nimport img_cross from '../assets/x.svg'\nimport Fuse from 'fuse.js';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  useHistory,\n  useRouteMatch,\n  Route,\n  Link,\n  useParams\n} from \"react-router-dom\";\n\n const HeaderComponent = (props) => {\n\n    // HOOKS\n    const [searchQuery, setSearchQuery] = useState('');\n    const [searchResults, setSearchResults ] = useState([]);\n    const [searchActive, setSearchActive ] = useState(false);\n\n    let history = useHistory();\n\n    const searchInput = useRef(null);\n\n    const termArr = terms.terms;\n\n    const options = {\n        shouldSort: true,\n        threshold: 0.2,\n        location: 0,\n        distance: 100,\n        minMatchCharLength: 5,\n        keys: ['Term']\n      };\n  \n    const fuse = new Fuse(termArr, options );\n\n    //---------------------------------------------//\n\n    document.addEventListener('keypress', (e) => {\n      if( searchQuery.length == 0 ){\n          searchInput.current.focus();\n      }\n\n    });\n\n    const onSearchChange = e => {\n        \n        console.log( 'searchChange', e.target.value );\n\n        setSearchQuery(e.target.value);\n        setSearchResults( fuse.search(e.target.value).filter( x=> x.item.Term != '') )\n    }\n\n    const onSubmit = e => {\n        e.preventDefault();\n        if( searchResults.length > 0 ){\n          onSearchClick( searchResults[0].item )\n        } else {\n          setSearchQuery('');\n        searchInput.current.blur();\n\n        }\n    }\n\n    const onSearchClick = term => {\n        setSearchQuery('');\n        setSearchResults([]);\n        history.push('/term/' + term.url );\n        searchInput.current.blur();\n    }\n\n    const setSearch = (e, val) => {\n      e.preventDefault();\n\n      if( val ){\n        // useEffect(() => {\n          searchInput.current.focus();\n        // }, []);\n      } else {\n        setSearchQuery('');\n        setSearchResults([]);\n        searchInput.current.blur();\n      }\n\n    }\n\n    const onFocus = e => {\n      setSearchActive(true)\n    }\n\n    const onBlur = e => {\n      setSearchActive(false);\n      if( searchResults.length == 0 ){\n        setSearchQuery('');\n      }\n    }\n\n    return (\n        <header>\n          <div className=\"wrapper\">\n            \n            <div className=\"title\">\n              FASHIONTECH DICTIONARY\n            </div>\n\n            <div className=\"searchHolder\">\n                \n                <div className=\"buttons\">\n                  { !(searchActive || searchQuery.length>0) && <a href=\"\" className=\"btnSearch\" onClick={ (e) => setSearch(e, true) }><img src={ img_search } /></a> }\n                  { (searchActive || searchQuery.length>0) && <a href=\"\" className=\"btnClose\" onClick={ (e) => setSearch(e, false) }><img src={ img_cross } /></a> }\n                </div>\n\n                <form onSubmit={ onSubmit }> \n                  \n                    <input type=\"search\" value={searchQuery} onChange={onSearchChange} onFocus={onFocus} onBlur={onBlur} ref={searchInput} maxLength=\"40\" />\n                </form>\n\n                \n\n            </div>\n\n            { searchResults && searchResults.length > 0 && \n                <div className=\"searchResults\">  \n                  { \n                    searchResults.map( result => {\n                      return(<div className=\"searchItem\" key={result.item.url}>\n                          <a onClick={ () => onSearchClick(result.item) }>{ result.item.Term }</a>\n                      </div>)\n                    })\n                  }\n                </div>\n              }\n\n          </div>\n        </header>\n\n    );\n}\n\nexport default HeaderComponent\n\n"]},"metadata":{},"sourceType":"module"}